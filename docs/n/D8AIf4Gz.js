import{_ as S}from"./CMnLZb_b.js";import{f as V,g as N,h as l,u as R,c,a as e,i as U,j as h,v as x,k as t,l as w,n as j,t as _,F as T,m as q,q as b,d as y,b as B,w as E,o as d}from"./BUKr0aQZ.js";import{u as L}from"./BCW-iNXX.js";const D={class:"col-span-4 sm:col-span-4 lg:col-span-4"},F={class:"w-full h-full flex justify-center items-center blur-background"},M={class:"min-w-[415px] w-[415px]"},P=e("h3",{class:"text-3xl mb-3"},"Login",-1),$={class:"flex justify-between items-center gap-2"},z={class:"transition-all p-2 rounded-md px-4 bg-yellow-100 text-black self-end hover:bg-yellow-200"},H={key:0,class:""},A={class:"text-red-500 list-disc list-inside"},G={key:1,class:"text-red-500"},I={class:"mt-4"},X={__name:"login",setup(J){const k=V();N();const O=L(),n=l(""),u=l(""),m=l(!1),r=l(!1),a=l([]),p=l(""),v=l(!1),C=async()=>{if(v.value=!1,r.value=!1,a.value=[],p.value=null,n.value.trim()||a.value.push("Username is Required"),u.value.trim()||a.value.push("Password is Required"),a.value.length>0){r.value=!0;return}try{m.value=!0;const s=await $fetch("https://gossipgirls.pythonanywhere.com/api/login/",{method:"POST",body:{username:n.value,password:u.value}});v.value=!0;const{token:o,usrname:g,id:f}=s;O.setUser(g,o,f),setTimeout(()=>{k.back()},1e3)}catch(s){typeof s.statusCode>"u"?(r.value=!0,p.value=s.cause.message):s.statusCode>=400&&s.statusCode<500&&(r.value=!0,a.value=Object.values(s.data).flat()),console.log({err:s})}finally{m.value=!1}};return R({title:"gossipgirls - login"}),(s,o)=>{var f;const g=S;return d(),c("div",D,[e("div",F,[e("div",M,[P,e("form",{class:"flex flex-col gap-2",onSubmit:U(C,["prevent"])},[h(e("input",{"onUpdate:modelValue":o[0]||(o[0]=i=>w(n)?n.value=i:null),class:"p-2 rounded-md text-black",placeholder:"username"},null,512),[[x,t(n)]]),h(e("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>w(u)?u.value=i:null),class:"p-2 rounded-md text-black",placeholder:"password"},null,512),[[x,t(u)]]),e("div",$,[e("div",{class:j(`transition-all bg-green-700 flex-grow p-3 text-white rounded-md ${t(v).valueOf()?"opacity-100":"opacity-0"}`)}," Successfully signed in, redirecting ... ",2),e("button",z,_(t(m).valueOf()?"loading ...":"sign in"),1)])],32),t(r).valueOf()&&t(a).length>0?(d(),c("ul",H,[(d(!0),c(T,null,q(t(a),i=>(d(),c("li",A,_(i),1))),256))])):b("",!0),((f=t(p))==null?void 0:f.valueOf().length)>0?(d(),c("div",G,_(t(p).valueOf()),1)):b("",!0),e("p",I,[y(" don't have account. "),B(g,{to:"/signup",class:"text-blue-600"},{default:E(()=>[y("signup")]),_:1})])])])])}}};export{X as default};
