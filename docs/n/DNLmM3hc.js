import{_ as O}from"./DC1rGUgY.js";import{f as S,h as a,u as N,c,a as e,i as R,j as g,v as h,k as s,l as _,n as j,t as x,F as q,m as E,q as b,d as y,b as T,w as U,o as p}from"./CobhV27D.js";const B={class:"col-span-4 sm:col-span-4 lg:col-span-4"},D={class:"w-full h-full flex justify-center items-center blur-background"},F={class:"min-w-[415px] w-[415px]"},L=e("h3",{class:"text-3xl mb-3"},"Signup",-1),M={class:"flex justify-between items-center gap-2"},P={class:"transition-all p-2 rounded-md px-4 bg-yellow-100 text-black self-end hover:bg-yellow-200"},$={key:0,class:""},z={class:"text-red-500 list-disc list-inside"},H={key:1,class:"text-red-500"},A={class:"mt-4"},K={__name:"signup",setup(G){const k=S(),u=a(""),i=a(""),r=a(""),f=a(!1),d=a(!1),t=a([]),m=a(""),v=a(!1),V=async()=>{if(v.value=!1,d.value=!1,t.value=[],m.value=null,u.value.trim()||t.value.push("Email is Required"),i.value.trim()||t.value.push("Username is Required"),r.value.trim()||t.value.push("Password is Required"),t.value.length>0){d.value=!0;return}try{f.value=!0;const l=await $fetch("https://gossipgirls.pythonanywhere.com/api/users/",{method:"POST",body:{username:i.value,password:r.value,email:u.value}});v.value=!0,setTimeout(()=>{k.push("/login")},1e3)}catch(l){typeof l.statusCode>"u"?(d.value=!0,m.value=l.cause.message):l.statusCode>=400&&l.statusCode<500&&(d.value=!0,t.value=Object.values(l.data).flat()),console.log({err:l})}finally{f.value=!1}};return N({title:"gossipgirls - signup"}),(l,n)=>{var w;const C=O;return p(),c("div",B,[e("div",D,[e("div",F,[L,e("form",{class:"flex flex-col gap-2",onSubmit:R(V,["prevent"])},[g(e("input",{class:"p-2 rounded-md text-black",placeholder:"email","onUpdate:modelValue":n[0]||(n[0]=o=>_(u)?u.value=o:null)},null,512),[[h,s(u)]]),g(e("input",{class:"p-2 rounded-md text-black",placeholder:"username","onUpdate:modelValue":n[1]||(n[1]=o=>_(i)?i.value=o:null)},null,512),[[h,s(i)]]),g(e("input",{class:"p-2 rounded-md text-black",placeholder:"password","onUpdate:modelValue":n[2]||(n[2]=o=>_(r)?r.value=o:null)},null,512),[[h,s(r)]]),e("div",M,[e("div",{class:j(`transition-all bg-green-700 flex-grow p-3 text-white rounded-md ${s(v).valueOf()?"opacity-100":"opacity-0"}`)}," Successfully signed up, redirecting ... ",2),e("button",P,x(s(f)?"loading ...":"sign up"),1)])],32),s(d).valueOf()&&s(t).length>0?(p(),c("ul",$,[(p(!0),c(q,null,E(s(t),o=>(p(),c("li",z,x(o),1))),256))])):b("",!0),((w=s(m))==null?void 0:w.valueOf().length)>0?(p(),c("div",H,x(s(m).valueOf()),1)):b("",!0),e("p",A,[y(" do have an account ? "),T(C,{to:"/login",class:"text-blue-600"},{default:U(()=>[y("signin")]),_:1})])])])])}}};export{K as default};
