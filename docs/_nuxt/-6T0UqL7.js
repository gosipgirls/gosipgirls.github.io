import{o as n,c,a as e,t as g,N,F as f,q as L,g as j,f as C,A as B,h as _,x as I,y as P,u as R,k as i,m as y,n as x,b as S,M as V}from"./BmPOnJdt.js";const A={class:"animate-pulse flex justify-between cursor-pointer hover:bg-opacity-10 bg-white p-4 my-2 bg-opacity-5 backdrop-blur-lg border-gray-400 border-[1px] rounded-md"},D={class:"font-semibold relative before:w-full before:bg-slate-200 before:h-full before:absolute before:rounded-md"},F=e("div",{class:"flex justify-between items-center relative before:w-full before:bg-slate-400 before:h-full before:absolute before:rounded-md"},[e("span",null,"2 votes")],-1),M={__name:"listItemLoading",props:{length:Number},setup(d){const t=d;return(u,o)=>(n(),c("div",A,[e("span",D,g("x".repeat(t.length||10)),1),F]))}},z=N("/image.png"),E={class:"font-semibold"},H={class:"flex justify-between items-center"},O=e("img",{src:z,class:"brightness-200",width:"25"},null,-1),U=e("span",null,"âˆ™",-1),G={__name:"listItem",props:{image:String,question:String,votes:Number,id:Number},setup(d){const t=d;return(u,o)=>(n(),c("div",{onClick:o[0]||(o[0]=p=>u.$router.push("/polls/"+t.id)),class:"flex justify-between cursor-pointer hover:bg-opacity-10 bg-white p-4 my-2 bg-opacity-5 backdrop-blur-lg border-gray-400 border-[1px] rounded-md"},[e("span",E,g(t.question),1),e("div",H,[t.image?(n(),c(f,{key:0},[O,U],64)):L("",!0),e("span",null,g(t.votes)+" votes",1)])]))}},J={class:"col-span-4 sm:col-span-4 lg:col-span-4"},K={class:"w-full h-full flex flex-col py-5 px-2 rounded *:transition-all"},Q=e("div",null,[e("h3",{class:"text-4xl text-center mb-5"},"Polls")],-1),T={class:"flex justify-between my-4 border-t border-t-gray-600 pt-4 *:transition-all"},W=["disabled"],X=["disabled"],Z={__name:"index",setup(d){const t=j(),u=C(),o=B(()=>+t.query.page||1),p=_([]),b=_(!1),r=_({next:null,prev:null}),h=async()=>{try{b.value=!0;const a=await $fetch("https://gossipgirls.pythonanywhere.com/api/polls/?page="+o.value);r.value.next=a.next,r.value.prev=a.previous;const v=a.results.map(l=>{var s;const m=(s=l==null?void 0:l.choices)==null?void 0:s.reduce(($,q)=>q.votes.length+$,0);return{...l,votes:m}});p.value=v}catch(a){console.log({err:a})}finally{b.value=!1}},w=()=>{u.push({query:{page:o.value+1}})},k=()=>{u.push({query:{page:o.value-1}})};return I(o,h),P(()=>{h()}),R({title:"gossipgirls - polls"}),(a,v)=>{const l=M,m=G;return n(),c("div",J,[e("div",K,[Q,i(b).valueOf()?(n(),c(f,{key:0},y(7,s=>S(l,{length:20})),64)):(n(!0),c(f,{key:1},y(i(p),s=>(n(),V(m,{key:s.id,image:s.image,question:s.question,votes:s.votes,id:s.id},null,8,["image","question","votes","id"]))),128)),e("div",T,[e("button",{disabled:!i(r).prev,class:x(`${i(r).prev?"prev":" cursor-not-allowed"} blur-background  px-5 py-1`),onClick:k},"< Previous",10,W),e("button",{disabled:!i(r).next,class:x(`${i(r).next?"next":" cursor-not-allowed"} blur-background  px-5 py-1`),onClick:w},"Next >",10,X)])])])}}};export{Z as default};
